import{r as P,a as r,H as E,o as a,b as e,d as V,n as y,e as I,I as U,m as k,i as t,g as i,t as d,c as j,F as T,J as p,w as x,p as g,u as q,q as J,A as Z}from"./vendor-BOwXO-1K.js";import{a as N,b as G,_ as w,u as A}from"./main-C3y6mfnZ.js";const v=P(!0);function K(){const s=async()=>{v.value=!v.value,o();const{isLoggedIn:u}=N();if(u.value)try{await G.put("/api/users/me",{theme:v.value?"dark":"light"})}catch(m){console.error("Błąd podczas zapisu motywu w bazie danych",m)}},o=()=>{const u=document.documentElement;v.value?(u.classList.remove("light"),localStorage.setItem("theme","dark")):(u.classList.add("light"),localStorage.setItem("theme","light"))};return{isDark:v,toggleTheme:s,initTheme:()=>{const u=localStorage.getItem("theme");u?v.value=u==="dark":v.value=!0,o()}}}const Q={},Y={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function ee(s,o){return a(),r("svg",Y,[...o[0]||(o[0]=[E('<path d="M4 21v-7" stroke-linecap="round"></path><path d="M4 10V3" stroke-linecap="round"></path><path d="M12 21v-9" stroke-linecap="round"></path><path d="M12 8V3" stroke-linecap="round"></path><path d="M20 21v-5" stroke-linecap="round"></path><path d="M20 12V3" stroke-linecap="round"></path><path d="M1 14h6" stroke-linecap="round"></path><path d="M9 8h6" stroke-linecap="round"></path><path d="M17 16h6" stroke-linecap="round"></path>',9)])])}const R=w(Q,[["render",ee]]),te={},se={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function oe(s,o){return a(),r("svg",se,[...o[0]||(o[0]=[e("path",{d:"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Z"},null,-1),e("path",{d:"M20 21a8 8 0 0 0-16 0"},null,-1)])])}const ne=w(te,[["render",oe]]),re={},ae={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function le(s,o){return a(),r("svg",ae,[...o[0]||(o[0]=[e("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},null,-1),e("path",{d:"M16 17 21 12 16 7","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M21 12H9","stroke-linecap":"round"},null,-1)])])}const ie=w(re,[["render",le]]),de=["width","height"],ce=V({__name:"IconUsers",props:{size:{},color:{}},setup(s){return(o,c)=>(a(),r("svg",{width:s.size||"24",height:s.size||"24",class:y(s.color||"text-current"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[...c[0]||(c[0]=[e("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},null,-1),e("circle",{cx:"9",cy:"7",r:"4"},null,-1),e("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"},null,-1),e("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},null,-1)])],10,de))}}),ue={},me={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"};function fe(s,o){return a(),r("svg",me,[...o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])}const pe=w(ue,[["render",fe]]),xe={},he={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"};function ge(s,o){return a(),r("svg",he,[...o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])}const be=w(xe,[["render",ge]]),ve={},ye={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"};function we(s,o){return a(),r("svg",ye,[...o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"},null,-1)])])}const _e=w(ve,[["render",we]]);function bt(s){if(!s)return"";const o=new Date(s);return isNaN(o.getTime())?s:o.toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"})}const vt=(s,o)=>{if(!s)return"";if(s.includes("ReferenceError")){const c=s.match(/ReferenceError: (.*) is not defined/);if(c)return o("errors.referenceError",{var:c[1]})}return s.includes("SyntaxError")?s.includes("Unexpected token")?o("errors.syntaxErrorUnexpectedToken"):o("errors.syntaxError")+`

${s}`:s.includes("TypeError")?o("errors.typeError")+`

${s}`:s};function ke(s){return s?s.startsWith("data:")||s.startsWith("http")||s.startsWith("/")||s.startsWith("blob:")?s:"/"+s:""}const Pe={},Ce={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function $e(s,o){return a(),r("svg",Ce,[...o[0]||(o[0]=[e("path",{d:"M6 9l6 6 6-6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const Me=w(Pe,[["render",$e]]),Se=["aria-label","aria-expanded"],je={class:"relative flex items-center justify-center"},Le={key:0,class:"flex h-5 w-5 items-center justify-center overflow-hidden rounded-full border border-white/20 shadow-sm"},Be={key:1,class:"flex h-5 w-5 items-center justify-center overflow-hidden rounded-full border border-white/20 shadow-sm"},Te={class:"uppercase tracking-wider text-textWhite transition-colors group-hover:text-textPrimary"},Ee={key:0,class:"absolute right-0 top-full z-50 mt-2 w-32 origin-top-right rounded-xl border border-strokePrimary/40 bg-bgPrimary p-1 shadow-xl shadow-black/40 backdrop-blur-sm transition-all"},Ie={class:"relative flex items-center justify-center"},Ve={key:0,class:"flex h-4 w-4 items-center justify-center overflow-hidden rounded-full border border-white/20 shadow-sm"},ze={key:1,class:"flex h-4 w-4 items-center justify-center overflow-hidden rounded-full border border-white/20 shadow-sm"},We={class:"uppercase"},De=V({__name:"LanguageSwitcher",setup(s){const{currentLanguage:o,toggleLanguage:c,isPolish:u,t:m}=A(),h=P(!1),l=P(null),C=()=>{h.value=!h.value},L=()=>{c(),h.value=!1},M=$=>{l.value&&!l.value.contains($.target)&&(h.value=!1)};return I(()=>{document.addEventListener("click",M)}),U(()=>{document.removeEventListener("click",M)}),($,f)=>(a(),r("div",{ref_key:"dropdownRef",ref:l,class:"relative"},[e("button",{class:"group relative flex items-center gap-2 rounded-full border border-strokePrimary/40 bg-bgSecondary/60 px-3 py-2 text-xs font-semibold transition-all hover:border-textPrimary/50 hover:bg-bgSecondary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-textPrimary","aria-label":t(m)("language.switchTo"),"aria-expanded":h.value,onClick:C},[e("span",je,[t(u)?(a(),r("span",Le,[...f[0]||(f[0]=[e("span",{class:"absolute inset-0 bg-white"},null,-1),e("span",{class:"absolute bottom-0 h-1/2 w-full bg-[#DC143C]"},null,-1)])])):(a(),r("span",Be,[...f[1]||(f[1]=[E('<span class="absolute inset-0 bg-[#012169]"></span><span class="absolute h-[2px] w-full rotate-45 bg-white"></span><span class="absolute h-[2px] w-full -rotate-45 bg-white"></span><span class="absolute h-[1px] w-full rotate-45 bg-[#C8102E]"></span><span class="absolute h-[1px] w-full -rotate-45 bg-[#C8102E]"></span><span class="absolute h-full w-[3px] bg-white"></span><span class="absolute h-[3px] w-full bg-white"></span><span class="absolute h-full w-[1.5px] bg-[#C8102E]"></span><span class="absolute h-[1.5px] w-full bg-[#C8102E]"></span>',9)])]))]),e("span",Te,d(t(o)),1),i(Me,{class:y(["h-3 w-3 text-textSecondary transition-transform duration-200 group-hover:text-textPrimary",{"rotate-180":h.value}])},null,8,["class"])],8,Se),h.value?(a(),r("div",Ee,[e("button",{class:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-xs font-medium text-textWhite transition hover:bg-bgSecondary hover:text-textPrimary",onClick:L},[e("span",Ie,[t(u)?(a(),r("span",ze,[...f[3]||(f[3]=[E('<span class="absolute inset-0 bg-[#012169]"></span><span class="absolute h-[2px] w-full rotate-45 bg-white"></span><span class="absolute h-[2px] w-full -rotate-45 bg-white"></span><span class="absolute h-[1px] w-full rotate-45 bg-[#C8102E]"></span><span class="absolute h-[1px] w-full -rotate-45 bg-[#C8102E]"></span><span class="absolute h-full w-[3px] bg-white"></span><span class="absolute h-[3px] w-full bg-white"></span><span class="absolute h-full w-[1.5px] bg-[#C8102E]"></span><span class="absolute h-[1.5px] w-full bg-[#C8102E]"></span>',9)])])):(a(),r("span",Ve,[...f[2]||(f[2]=[e("span",{class:"absolute inset-0 bg-white"},null,-1),e("span",{class:"absolute bottom-0 h-1/2 w-full bg-[#DC143C]"},null,-1)])]))]),e("span",We,d(t(u)?"en":"pl"),1)])])):k("",!0)],512))}}),He={class:"bg-bgPrimary border-b border-strokePrimary/20"},Re={class:"mx-auto flex h-16 sm:h-20 max-w-[1440px] items-center justify-between gap-3 sm:gap-8 px-4 sm:px-6"},Ue={key:0,class:"hidden flex-1 min-[950px]:flex min-[950px]:items-center min-[950px]:gap-8 lg:gap-12"},Ne={class:"flex items-center gap-6"},Ae={key:1,class:"flex-1 min-[950px]:hidden"},Oe={key:2,class:"hidden flex-1 min-[950px]:flex max-w-2xl"},Fe={class:"flex items-center gap-2 sm:gap-4 shrink-0"},Xe={class:"relative"},qe={class:"h-9 w-9 sm:h-12 sm:w-12 overflow-hidden rounded-full border border-strokePrimary bg-bgSecondary"},Je=["src","alt"],Ze={key:1,class:"flex h-full w-full items-center justify-center text-textSecondary text-lg sm:text-xl font-bold group-hover:text-textWhite transition-colors"},Ge={class:"absolute -bottom-1 -right-1 flex h-4 sm:h-5 min-w-4 sm:min-w-5 items-center justify-center rounded-full bg-textPrimary border-2 border-bgPrimary text-[8px] sm:text-[10px] font-bold text-black z-10 px-0.5 sm:px-1"},Ke={class:"hidden flex-col sm:flex"},Qe={class:"text-sm font-bold text-textWhite group-hover:text-textPrimary transition-colors"},Ye={class:"text-xs text-textSecondary"},et={class:"mt-1 h-1.5 w-28 overflow-hidden rounded-full bg-bgSecondary"},tt={class:"relative"},st=["aria-label","aria-expanded"],ot=["aria-label"],nt={class:"flex items-center gap-2"},rt={class:"h-4 w-4 rounded-full border border-current flex items-center justify-center text-[10px]"},at={class:"relative h-6 w-11 rounded-full bg-bgSecondary border border-strokePrimary/30 transition-colors"},lt={key:0,class:"my-2 h-px bg-strokePrimary/30"},it=["aria-label"],dt=["aria-label"],ct={key:0,class:"min-[950px]:hidden fixed bottom-0 left-0 right-0 bg-bgPrimary border-t border-strokePrimary/30 z-50"},ut={class:"flex items-center justify-around h-16 px-2"},mt={class:"text-[10px] font-medium"},ft={class:"text-[10px] font-medium"},pt={class:"text-[10px] font-medium"},xt={class:"text-[10px] font-medium"},yt=V({__name:"MainHeader",props:{navLinks:{default:()=>[]},isAdminMode:{type:Boolean,default:!1}},setup(s){const o=q(),c=J(),{isLoggedIn:u,user:m,logout:h}=N(),{t:l}=A(),{isDark:C,toggleTheme:L,initTheme:M}=K(),$=j(()=>m.value?.profile?.experience_points??0),f=j(()=>Math.floor($.value/1e3)+1),z=j(()=>$.value%1e3),O=j(()=>z.value/1e3*100);I(()=>{M()});const b=P(!1),W=P(null),D=P(null),F=()=>{b.value=!b.value},X=()=>{L()},B=_=>{_==="profile-settings"&&o.push({name:"profile-settings"}),_==="logout"&&h(),_==="admin-panel"&&(window.location.href="/admin"),b.value=!1},H=_=>{const n=_.target;b.value&&(W.value?.contains(n)||D.value?.contains(n)||(b.value=!1))};return I(()=>{document.addEventListener("click",H)}),U(()=>{document.removeEventListener("click",H)}),(_,n)=>(a(),r(T,null,[e("header",He,[e("div",Re,[i(t(p),{to:"/",class:"flex items-center gap-2 sm:gap-3 shrink-0 transition hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-textPrimary rounded-lg px-1","aria-label":t(l)("header.goToHomepage")},{default:x(()=>[...n[5]||(n[5]=[e("div",{class:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded bg-textPrimary text-[10px] sm:text-xs font-black text-bgPrimary"},"MUC",-1),e("span",{class:"text-lg font-bold text-textPrimary tracking-wide"},"MasterUrCode",-1)])]),_:1},8,["aria-label"]),s.isAdminMode?(a(),r("div",Ue,[e("nav",Ne,[i(t(p),{to:"/admin/users","active-class":"text-textPrimary font-bold",class:"text-textSecondary hover:text-textPrimary transition-colors font-medium relative group"},{default:x(()=>[g(d(t(l)("header.adminUsers"))+" ",1),n[6]||(n[6]=e("span",{class:"absolute -bottom-1 left-0 w-0 h-0.5 bg-textPrimary transition-all group-hover:w-full"},null,-1))]),_:1}),i(t(p),{to:"/admin/courses","active-class":"text-textPrimary font-bold",class:"text-textSecondary hover:text-textPrimary transition-colors font-medium relative group"},{default:x(()=>[g(d(t(l)("header.adminCourses"))+" ",1),n[7]||(n[7]=e("span",{class:"absolute -bottom-1 left-0 w-0 h-0.5 bg-textPrimary transition-all group-hover:w-full"},null,-1))]),_:1}),i(t(p),{to:"/admin/logs","active-class":"text-textPrimary font-bold",class:"text-textSecondary hover:text-textPrimary transition-colors font-medium relative group"},{default:x(()=>[g(d(t(l)("header.adminLogs"))+" ",1),n[8]||(n[8]=e("span",{class:"absolute -bottom-1 left-0 w-0 h-0.5 bg-textPrimary transition-all group-hover:w-full"},null,-1))]),_:1}),i(t(p),{to:"/admin/news","active-class":"text-textPrimary font-bold",class:"text-textSecondary hover:text-textPrimary transition-colors font-medium relative group"},{default:x(()=>[g(d(t(l)("header.adminNews"))+" ",1),n[9]||(n[9]=e("span",{class:"absolute -bottom-1 left-0 w-0 h-0.5 bg-textPrimary transition-all group-hover:w-full"},null,-1))]),_:1})])])):k("",!0),s.isAdminMode?(a(),r("div",Ae)):(a(),r("div",Oe,[...n[10]||(n[10]=[e("div",{class:"w-full"},null,-1)])])),e("div",Fe,[i(De),t(u)?(a(),r(T,{key:0},[i(t(p),{to:"/profil",class:"group flex items-center gap-2 sm:gap-3 transition hover:opacity-80"},{default:x(()=>[e("div",Xe,[e("div",qe,[t(m)?.profile?.avatar_url?(a(),r("img",{key:0,src:t(ke)(t(m).profile.avatar_url),alt:t(m)?.profile?.nickname||"Avatar",class:"h-full w-full object-cover"},null,8,Je)):(a(),r("div",Ze,"?"))]),e("div",Ge,d(f.value),1)]),e("div",Ke,[e("span",Qe,d(t(m)?.profile?.nickname||t(m)?.name||"User"),1),e("span",Ye,d(z.value)+"/1000 PD",1),e("div",et,[e("div",{class:"h-full bg-textPrimary transition-all",style:Z({width:`${O.value}%`})},null,4)])])]),_:1}),e("div",tt,[e("button",{ref_key:"settingsButtonRef",ref:D,class:"text-textPrimary hover:text-white transition-colors rounded-full border border-transparent px-2 py-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-textPrimary","aria-label":t(l)("header.openSettingsMenu"),"aria-expanded":b.value,tabindex:"0",onClick:F},[i(R,{class:"h-6 w-6"})],8,st),b.value?(a(),r("div",{key:0,ref_key:"settingsMenuRef",ref:W,class:"absolute right-0 top-full z-50 mt-3 w-56 rounded-2xl border border-strokePrimary/40 bg-bgPrimary p-2 shadow-2xl shadow-black/40",role:"menu","aria-label":t(l)("header.settingsMenuLabel")},[e("button",{class:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold text-textWhite transition hover:bg-cardHover",role:"menuitem",tabindex:"0",onClick:n[0]||(n[0]=S=>B("profile-settings"))},[i(ne,{class:"h-4 w-4"}),g(" "+d(t(l)("header.profileSettings")),1)]),e("div",{class:"flex w-full items-center justify-between rounded-xl px-3 py-2 text-sm font-semibold text-textWhite transition hover:bg-cardHover cursor-pointer",role:"menuitem",tabindex:"0",onClick:X},[e("div",nt,[e("div",rt,d((t(C),"?")),1),g(" "+d(t(l)("header.theme")),1)]),e("div",at,[e("div",{class:y(["absolute top-1 left-1 h-4 w-4 rounded-full bg-textPrimary shadow-sm transition-transform duration-200 ease-in-out",{"translate-x-5":!t(C),"translate-x-0":t(C)}])},null,2)])]),t(m)?.role==="admin"?(a(),r("div",lt)):k("",!0),t(m)?.role==="admin"?(a(),r("button",{key:1,class:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold text-textWhite transition hover:bg-cardHover",role:"menuitem",tabindex:"0",onClick:n[1]||(n[1]=S=>B("admin-panel"))},[i(R,{class:"h-4 w-4"}),g(" "+d(t(l)("header.adminPanel")),1)])):k("",!0),n[11]||(n[11]=e("div",{class:"my-2 h-px bg-strokePrimary/30"},null,-1)),e("button",{class:"flex w-full items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold text-red-300 transition hover:bg-red-500/10",role:"menuitem",tabindex:"0",onClick:n[2]||(n[2]=S=>B("logout"))},[i(ie,{class:"h-4 w-4"}),g(" "+d(t(l)("header.logout")),1)])],8,ot)):k("",!0)])],64)):(a(),r(T,{key:1},[e("button",{class:"text-sm font-semibold text-textWhite transition hover:text-textPrimary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-textPrimary rounded-full px-3 py-2","aria-label":t(l)("header.login"),onClick:n[3]||(n[3]=S=>t(o).push({name:"login"}))},d(t(l)("header.login")),9,it),e("button",{class:"rounded-full bg-textPrimary px-5 py-2 text-sm font-semibold text-bgPrimary transition hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-textPrimary","aria-label":t(l)("header.register"),onClick:n[4]||(n[4]=S=>t(o).push({name:"register"}))},d(t(l)("header.register")),9,dt)],64))])])]),s.isAdminMode?(a(),r("nav",ct,[e("div",ut,[i(t(p),{to:"/admin/users",class:y(["flex flex-col items-center justify-center gap-1 flex-1 py-2 transition-colors",{"text-textSecondary":t(c).path!=="/admin/users"}]),"active-class":"text-textPrimary"},{default:x(()=>[i(ce,{class:"h-6 w-6 mb-1"}),e("span",mt,d(t(l)("header.adminUsers")),1)]),_:1},8,["class"]),i(t(p),{to:"/admin/courses",class:y(["flex flex-col items-center justify-center gap-1 flex-1 py-2 transition-colors",{"text-textSecondary":!t(c).path.startsWith("/admin/courses")}]),"active-class":"text-textPrimary"},{default:x(()=>[i(pe,{class:"h-6 w-6 mb-1"}),e("span",ft,d(t(l)("header.adminCourses")),1)]),_:1},8,["class"]),i(t(p),{to:"/admin/logs",class:y(["flex flex-col items-center justify-center gap-1 flex-1 py-2 transition-colors",{"text-textSecondary":t(c).path!=="/admin/logs"}]),"active-class":"text-textPrimary"},{default:x(()=>[i(be,{class:"h-6 w-6 mb-1"}),e("span",pt,d(t(l)("header.adminLogs")),1)]),_:1},8,["class"]),i(t(p),{to:"/admin/news",class:y(["flex flex-col items-center justify-center gap-1 flex-1 py-2 transition-colors",{"text-textSecondary":!t(c).path.startsWith("/admin/news")}]),"active-class":"text-textPrimary"},{default:x(()=>[i(_e,{class:"h-6 w-6 mb-1"}),e("span",xt,d(t(l)("header.adminNews")),1)]),_:1},8,["class"])])])):k("",!0)],64))}});export{ce as _,yt as a,bt as b,ke as c,vt as f};
