import{d as T,r as i,e as q,a as v,g as b,b as e,i as s,F as E,t as r,q as N,m as P,s as h,v as S,y as L,f as u,p as g,w as W,x as U,u as z,o as l}from"./vendor-lIf_UB2E.js";import{a as A}from"./MainHeader.vue_vue_type_script_setup_true_lang-BbH4qV52.js";import{a as F,u as $}from"./main-AnIw5FzX.js";import{u as K}from"./useDashboardData-Baaeq227.js";import{u as O}from"./useRecaptcha-C-7uMv4J.js";import{I as G}from"./IconSpinner-B09ucU1X.js";import{I as V,a as j}from"./IconEyeOff-G91UlkKc.js";import"./axios-B9ygI19o.js";const H={class:"flex min-h-screen flex-col bg-bgPrimary text-textWhite"},J={class:"flex flex-1 items-center justify-center px-6 py-10"},Q={class:"w-full max-w-md space-y-8 rounded-2xl border border-strokePrimary/30 bg-card p-8 shadow-2xl shadow-black/20"},X={class:"text-center"},Y={class:"text-3xl font-bold text-textWhite"},Z={class:"mt-2 text-sm text-textSecondary"},ee={class:"space-y-2"},te={for:"name",class:"text-sm font-semibold text-textWhite"},se=["placeholder"],oe={class:"space-y-2"},re={for:"email",class:"text-sm font-semibold text-textWhite"},ae=["placeholder"],ie={class:"space-y-2"},le={for:"password",class:"text-sm font-semibold text-textWhite"},ne={class:"relative"},de=["type","placeholder"],ce={class:"space-y-2"},ue={for:"confirmPassword",class:"text-sm font-semibold text-textWhite"},me={class:"relative"},xe=["type","placeholder"],pe={key:0,class:"rounded-lg bg-red-500/10 p-3 text-sm text-red-400"},fe=["disabled"],ye={class:"text-center text-sm text-textSecondary"},ve={key:1,class:"text-center space-y-6"},he={class:"text-2xl font-bold tracking-tight text-white mb-2"},ge={class:"text-textSecondary"},be={class:"pt-4 border-t border-strokePrimary/30"},Be=T({__name:"RegisterPage",setup(we){z();const{register:B}=F(),{dashboardData:C}=K(),{t}=$(),{getToken:M,loadScript:D}=O(),m=i(""),x=i(""),d=i(""),p=i(""),f=i(!1),y=i(!1),c=i(!1),n=i(""),w=i(!1),I=C.value?.navLinks??[];q(()=>{D()});const R=async()=>{if(!m.value||!x.value||!d.value||!p.value){n.value=t("register.errorEmptyFields");return}if(d.value!==p.value){n.value=t("register.errorPasswordMismatch");return}if(d.value.length<8){n.value=t("register.errorPasswordLength");return}c.value=!0,n.value="";try{const _=await M("register");await B({name:m.value,email:x.value,password:d.value,recaptcha_token:_}),w.value=!0}catch{n.value=t("common.error")}finally{c.value=!1}};return(_,o)=>{const k=U("RouterLink");return l(),v("div",H,[b(A,{"nav-links":s(I)},null,8,["nav-links"]),e("main",J,[e("div",Q,[w.value?(l(),v("div",ve,[o[7]||(o[7]=e("div",{class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-500/20 text-green-500"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"h-8 w-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})])],-1)),e("div",null,[e("h2",he,r(s(t)("register.successTitle")||"Sprawdź swoją skrzynkę"),1),e("p",ge,r(s(t)("register.successMessage")||"Wysłaliśmy link weryfikacyjny na Twój adres e-mail. Kliknij go, aby aktywować konto i móc się zalogować."),1)]),e("div",be,[b(k,{to:{name:"login"},class:"flex w-full items-center justify-center rounded-full bg-textPrimary px-6 py-3 text-sm font-semibold text-bgPrimary transition hover:opacity-90"},{default:W(()=>[...o[6]||(o[6]=[g(" Przejdź do logowania ",-1)])]),_:1})])])):(l(),v(E,{key:0},[e("div",X,[e("h1",Y,r(s(t)("register.title")),1),e("p",Z,r(s(t)("register.subtitle")),1)]),e("form",{class:"space-y-5",onSubmit:N(R,["prevent"])},[e("div",ee,[e("label",te,r(s(t)("register.nameLabel")),1),h(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),type:"text",required:"",class:"w-full rounded-xl border border-strokePrimary/40 bg-inputBg px-4 py-3 text-sm text-textWhite placeholder:text-textSecondary focus:border-textPrimary focus:outline-none focus:ring-1 focus:ring-textPrimary",placeholder:s(t)("register.namePlaceholder")},null,8,se),[[S,m.value]])]),e("div",oe,[e("label",re,r(s(t)("register.emailLabel")),1),h(e("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=a=>x.value=a),type:"email",required:"",class:"w-full rounded-xl border border-strokePrimary/40 bg-inputBg px-4 py-3 text-sm text-textWhite placeholder:text-textSecondary focus:border-textPrimary focus:outline-none focus:ring-1 focus:ring-textPrimary",placeholder:s(t)("register.emailPlaceholder")},null,8,ae),[[S,x.value]])]),e("div",ie,[e("label",le,r(s(t)("register.passwordLabel")),1),e("div",ne,[h(e("input",{id:"password","onUpdate:modelValue":o[2]||(o[2]=a=>d.value=a),type:f.value?"text":"password",required:"",minlength:"8",class:"w-full rounded-xl border border-strokePrimary/40 bg-inputBg px-4 py-3 pr-12 text-sm text-textWhite placeholder:text-textSecondary focus:border-textPrimary focus:outline-none focus:ring-1 focus:ring-textPrimary",placeholder:s(t)("register.passwordPlaceholder")},null,8,de),[[L,d.value]]),e("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-textSecondary hover:text-textWhite focus:outline-none",onClick:o[3]||(o[3]=a=>f.value=!f.value)},[f.value?(l(),u(V,{key:0,class:"h-5 w-5"})):(l(),u(j,{key:1,class:"h-5 w-5"}))])])]),e("div",ce,[e("label",ue,r(s(t)("register.confirmPasswordLabel")),1),e("div",me,[h(e("input",{id:"confirmPassword","onUpdate:modelValue":o[4]||(o[4]=a=>p.value=a),type:y.value?"text":"password",required:"",class:"w-full rounded-xl border border-strokePrimary/40 bg-inputBg px-4 py-3 pr-12 text-sm text-textWhite placeholder:text-textSecondary focus:border-textPrimary focus:outline-none focus:ring-1 focus:ring-textPrimary",placeholder:s(t)("register.confirmPasswordPlaceholder")},null,8,xe),[[L,p.value]]),e("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-textSecondary hover:text-textWhite focus:outline-none",onClick:o[5]||(o[5]=a=>y.value=!y.value)},[y.value?(l(),u(V,{key:0,class:"h-5 w-5"})):(l(),u(j,{key:1,class:"h-5 w-5"}))])])]),n.value?(l(),v("div",pe,r(n.value),1)):P("",!0),e("button",{type:"submit",class:"flex w-full items-center justify-center gap-2 rounded-full bg-textPrimary px-6 py-3 text-sm font-semibold text-bgPrimary transition hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-textPrimary disabled:cursor-not-allowed disabled:opacity-70",disabled:c.value},[c.value?(l(),u(G,{key:0,class:"h-5 w-5 animate-spin text-bgPrimary"})):P("",!0),g(" "+r(c.value?s(t)("register.submitting"):s(t)("register.submitButton")),1)],8,fe)],32),e("div",ye,[g(r(s(t)("register.hasAccount"))+" ",1),b(k,{to:{name:"login"},class:"font-semibold text-textPrimary hover:underline"},{default:W(()=>[g(r(s(t)("register.loginLink")),1)]),_:1})])],64))])])])}}});export{Be as default};
